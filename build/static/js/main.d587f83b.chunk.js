(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{41:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t.n(r),a=t(17),i=t.n(a),o=(t(8),t(6)),u=t(4),s=t(3),d=t(5),j=t.n(d),l="/api/persons",b={getPersons:function(){return j.a.get(l).then((function(e){return e.data}))},createPerson:function(e){return j.a.post(l,e).then((function(e){return e.data}))},updatePerson:function(e){return j.a.put("".concat(l,"/").concat(e.id),e).then((function(e){return e.data}))},deletePerson:function(e){return j.a.delete("".concat(l,"/").concat(e)).then((function(e){return e.data}))}},f=t(0),m=function(e){var n=e.filterQuery,t=e.changeFilterQuery;return Object(f.jsxs)("div",{children:["Filter shown with a",Object(f.jsx)("input",{name:n,onChange:t})]})},h=function(e){var n=e.entry,t=e.addContactHandler,r=e.changeEntryHandler;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("form",{onSubmit:t,children:[Object(f.jsxs)("div",{children:["Name:",Object(f.jsx)("input",{name:n.name,onChange:r("name")}),Object(f.jsx)("br",{}),"Number:",Object(f.jsx)("input",{number:n.number,onChange:r("number")})]}),Object(f.jsx)("div",{children:Object(f.jsx)("button",{type:"submit",children:"add"})})]})})},O=function(e){var n=e.person,t=e.deleteHandler;return Object(f.jsx)(f.Fragment,{children:Object(f.jsxs)("form",{onSubmit:t(n.id),children:[n.name," ",n.number,Object(f.jsx)("button",{type:"submit",children:"Delete"}),Object(f.jsx)("br",{})]})})},x=function(e){var n=e.contacts,t=e.filterQuery,r=e.deleteHandler,c=n.filter((function(e){return e.name.includes(t)}));return Object(f.jsx)(f.Fragment,{children:c.map((function(e){return Object(f.jsx)(O,{person:e,deleteHandler:r},e.name)}))})},p=function(e){var n=e.message,t=e.notificationStyle;return null===n?null:Object(f.jsx)("div",{className:t,children:n})},v=function(){var e=Object(r.useState)(""),n=Object(s.a)(e,2),t=n[0],c=n[1],a=Object(r.useState)(null),i=Object(s.a)(a,2),d=i[0],j=i[1],l=Object(r.useState)(null),O=Object(s.a)(l,2),v=O[0],g=O[1],y=function(e){g(e),setTimeout((function(){g(null)}),5e3)},w=Object(r.useState)({name:"",number:""}),S=Object(s.a)(w,2),P=S[0],H=S[1],N=Object(r.useState)([]),k=Object(s.a)(N,2),F=k[0],Q=k[1];return Object(r.useEffect)((function(){b.getPersons().then((function(e){return Q(e)}))}),[]),Object(f.jsxs)("div",{children:[Object(f.jsx)("h1",{children:"Phonebook"}),Object(f.jsx)(p,{message:v,notificationStyle:"failureNotification"}),Object(f.jsx)(p,{message:d,notificationStyle:"successNotification"}),Object(f.jsx)(m,{filterQuery:t,changeFilterQuery:function(e){c(e.target.value)}}),Object(f.jsx)("h2",{children:"Add New Entry"}),Object(f.jsx)(h,{entry:P,addContactHandler:function(e){e.preventDefault();var n=function(e){return e.name===P.name};if(!1===F.some(n))b.createPerson(P).then((function(e){var n;Q(F.concat(e)),n="Added ".concat(P.name),j(n),setTimeout((function(){j(null)}),5e3)})).catch((function(e){y(e.response.data.error)}));else{var t="".concat(P.name," is already added to the phonebook, replace the old number with a new one?");if(window.confirm(t)){var r=F.find(n).id,c=Object(u.a)(Object(u.a)({},P),{},{id:r});b.updatePerson(c).then((function(e){var n=F.map((function(n){return n.id===e.id?c:n}));Q(n)}))}}H({name:"",number:""}),e.target.reset()},changeEntryHandler:function(e){return function(n){var t=Object(u.a)(Object(u.a)({},P),{},Object(o.a)({},e,n.target.value));H(t)}}}),Object(f.jsx)("h2",{children:"Numbers"}),Object(f.jsx)(x,{contacts:F,filterQuery:t,deleteHandler:function(e){return function(n){n.preventDefault();var t=F.find((function(n){return n.id===e})).name,r="Delete ".concat(t,"?");window.confirm(r)&&b.deletePerson(e).catch((function(){y("Information of ".concat(t," has already been removed from server"))})).finally((function(){var n=F.filter((function(n){return n.id!==e}));Q(n)}))}}})]})};i.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(v,{})}),document.getElementById("root"))},8:function(e,n,t){}},[[41,1,2]]]);
//# sourceMappingURL=main.d587f83b.chunk.js.map